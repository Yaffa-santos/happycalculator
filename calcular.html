<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Calculadora</title>

    <link rel="stylesheet" href="calcular.css"/>
    <link rel="stylesheet" href="todos.css"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <audio id="sfx" hidden>
      <source src="sfx_robo.mp3" type="audio/mpeg"></source>
    </audio>
  </head>

  <body>
    <div class="topnav">
      <a href="index.html" class="btn">
        <span class="icon">üè†</span> P√°gina inicial
      </a>
      <a href="calcular.html" class="btn active">
        <span class="icon">üì±</span> Calculadora de Geometria
      </a>
      <a href="formulas.html" class="btn">
        <span class="icon">üìö</span> F√≥rmulas
      </a>
      <a href="creditos.html" class="btn">
        <span class="icon">‚ù§Ô∏è</span> Cr√©ditos
      </a>
    </div>

    <main>
      <div class="container">
        <div>
          <div id="cone"></div>
          <button class="button" onclick="calcularVolumeCone()">Volume do Cone</button>
        </div>
        <div>
          <div id="cilindro"></div>
          <button class="button" onclick="calcularVolumeCilindro()">Volume do Cilindro</button>
        </div>
        <div>
          <div id="triangulo"></div>
          <button class="button" onclick="calcularAreaTriangulo()">√Årea do Tri√¢ngulo</button>
        </div>

        <div class="resultado-container">
          <h2>SEU RESULTADO</h2>
          <div class="resultado-box">
            <span id="resultado-texto">Nenhum ainda (fa√ßa um c√°lculo primeiro...)</span>
          </div>
        </div>
      </div>
    </main>
  </body>

  <script>
    function tocarSom() {
      document.querySelector("#sfx").play();
    }

    function calcularVolumeCone() {
      let raio = prompt("Digite o raio do cone:");
      let altura = prompt("Digite a altura do cone:");

      if (raio && altura) {
	let volume = (1 / 3) * Math.PI * Math.pow(raio, 2) * altura;
        tocarSom();
	document.getElementById("resultado-texto").innerText = `Volume do Cone: ${volume.toFixed(2)} unidades¬≥`;
      }
    }

    function calcularVolumeCilindro() {
      let raio = prompt("Digite o raio do cilindro:");
      let altura = prompt("Digite a altura do cilindro:");

      if (raio && altura) {
	let volume = Math.PI * Math.pow(raio, 2) * altura;
        tocarSom();
	document.getElementById("resultado-texto").innerText = `Volume do Cilindro: ${volume.toFixed(2)} unidades¬≥`;
      }
    }

    function calcularAreaTriangulo() {
      let base = prompt("Digite a base do tri√¢ngulo:");
      let altura = prompt("Digite a altura do tri√¢ngulo:");

      if (base && altura) {
	let area = (base * altura) / 2;
        tocarSom();
	document.getElementById("resultado-texto").innerText = `√Årea do Tri√¢ngulo: ${area.toFixed(2)} unidades¬≤`;
      }
    }

    function createScene(elementId, shape) {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);

      const renderer = new THREE.WebGLRenderer({ alpha: true });
      renderer.setClearColor(0x000000, 0);
      renderer.setSize(150, 150);

      document.getElementById(elementId).appendChild(renderer.domElement);
      
      const light = new THREE.PointLight(0xffffff, 1.2);
      light.position.set(2, 2, 2);
      scene.add(light);

      let geometry = null;
      switch (shape) {
	case "cone":
	  geometry = new THREE.ConeGeometry(2, 4, 64);
	  camera.rotation.z = 0.1 * Math.PI;
	  break;
	case "cilindro":
	  geometry = new THREE.CylinderGeometry(2, 2, 4, 64);
	  camera.rotation.z = 0.1 * Math.PI;
	  break;
	case "triangulo":
	  geometry = new THREE.ConeGeometry(2, 4, 4);
	  camera.rotation.x = 0.1 * Math.PI;
	  camera.position.y -= 2;
	  break;
      }

      const material = new THREE.MeshStandardMaterial({ color: 0x3498db });
      const object = new THREE.Mesh(geometry, material);
      scene.add(object);
      camera.position.z = 5;

      function animate() {
	if (shape !== "triangulo")
	  requestAnimationFrame(animate);
	object.rotation.y += 0.01;
	renderer.render(scene, camera);
      }

      animate();
    }
      
    createScene("cone", "cone");
    createScene("cilindro", "cilindro");
    createScene("triangulo", "triangulo");
  </script>
</html>
